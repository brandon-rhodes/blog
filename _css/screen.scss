@import "_normalize";
@import "compass/css3/box-shadow";
@import "compass/css3/text-shadow";
@import "compass/typography/vertical_rhythm";

* { box-sizing: border-box }  /* Paul Irish */

$pagebg: #e2daaf;
$contentbg: #f7f4e4;
$sidebarbg: #bb9d69;
$headertxt: #75402f;
$titletxt: #700;

body {
  background: $pagebg url('/brandon/sidebar.jpg') repeat-y center top;
  font-family: 'Crimson Text', serif;
  @media screen and (min-width: 400px) {@include adjust-font-size-to(18px);}
  @media screen and (min-width: 480px) {background-position: right top;}
  @media screen and (min-width: 660px) {background-position: 90% top;}
  @media screen and (min-width: 780px) {background-position: 80% top;}
  @media screen and (min-width: 960px) {background-position: 70% top;}
}

header {
  position: absolute;
  top: 0px;
  left: 1%;
  right: 1%;
  padding-top: 0.8em;
  text-align: center;
  font-family: 'Gentium Book Basic', serif;

  @media screen and (min-width: 480px) {left: auto; right: 20%;}
  @media screen and (min-width: 960px) {right: 27.5%;}

  a.site-title {
    display: block;
    color: $headertxt;
    text-decoration: none;
  }
  span.title {
    @include text-shadow(0px 1px 0px lighten($sidebarbg, 30%), 0px -1px 0px #000);
    /* TODO: body.index & {font-size: 1.5em;} */
  }
  span {
    display: block;
    white-space: nowrap;
  }
  .author:before {
    content: "by ";
  }
  img {
    height: 24px;
    width: 24px;
  }
}

footer {
  line-height: 1em;
  text-align: center;
  @media screen and (min-width: 560px) {margin-left: 20%;}
}

@mixin main-content {
  margin: 2.5em auto;
  &:first-child {margin-top: 4em;}
  max-width: 32em;
  padding: 0.8em 5%;
}

.scraps {
  @include main-content;
  > div {
    /* float: left; */
  }
  &:after {
    clear: both;
    content: "Â ";
  }
}

body.index {
  .social-media {
    .media {    
      text-align: center;
      > div {
        display: inline-block;
        vertical-align: top;
      }
    }
  }
}

body.chronological article {
  /* Narrow screens: date, title, and summary are simply stacked
     vertically. To help the dates stand out we provide a little more
     space above them, and make them italic. */
  h2, p {
    margin: 0.5em 0em;
    font-size: 1em;
  }
  .date2 {
    margin-top: 1.2em;
    font-style: italic;
    word-spacing: 0.18em;
  }
  @media screen and (min-width: 490px) {
    /* Wide screens: float the date left, into a separate column. With the
       date providing a visual cue, the vertical separation between items
       can be reduced to 1em, and the date no longer has to be italic. */
    h2, p {
      margin: 1em 0em 1em 6em;
    }
    .date2 {
      float: left;
      margin: 0em;
      font-style: normal;
    }
  }
}

article {
  @include main-content;
  @include box-shadow(2px 2px 7px #000);
  background-color: $contentbg;

  .date {
    margin-top: 0.8em;
    text-align: center;
    color: $sidebarbg;
    a {color: $sidebarbg;}
  }
  h1 {
    margin-top: 0px;
    border-top: 1px solid $titletxt;
    color: $titletxt;
    text-align: center;
    line-height: 1em;
    font-weight: normal;
  }
  h2 {
    color: $titletxt;
    font-weight: normal;
  }
  blockquote, .caption {
    color: darken($contentbg, 70%);
  }
  .caption {
    display: block;
    text-align: center;
    margin: 0.3em 10%;
    padding-top: 1em;
  }
  blockquote {
    border-top: 1px solid darken($contentbg, 10%);
    border-bottom: 1px solid darken($contentbg, 10%);
    padding: 0.3em 0em;
  }
  ul {
    padding-left: 1em;
    @media screen and (min-width: 480px) {
      padding-left: 1.5em;
    }
  }
  li {
    margin-top: 1em;
    margin-bottom: 1em;
  }
  img, iframe {
    max-width: 100%;
  }
  tt {
    color: $titletxt;
    @include adjust-font-size-to(16px, 1, 18px);
    a {color: $titletxt;}
  }
  img, .image-reference {
    display: block;
    margin: 0.2em auto 1em;
  }
  img.inline {
    display: inline;
  }
  .image-reference {
    text-align: center;
    @media screen and (min-width: 560px) {
      float: right;
      margin-left: 1em;
      margin-bottom: 1em;
    }
    img {
      @include box-shadow(2px 2px 7px darken($contentbg, 70%));
      border-width: 1px 2px 2px 1px;
      border-style: solid;
      border-color: darken($contentbg, 50%) darken($contentbg, 70%) darken($contentbg, 70%) darken($contentbg, 50%);
    }
  }
  &:after {
    display: block;
    clear: both;
    height: 0px;
    width: 0px;
    content: " ";
  }
}

.blog-summary {
  a {
    color: darken($titletxt, 5%);
    text-decoration: none;
    &:hover {text-decoration: underline;}
  }
}

pre {
  @include box-shadow(0px 0px 7px #640);
  background-color: white;
  padding: 0.3em 0.5em;
  width: 40em;  /* nearly 80 characters with Inconsolata */
  white-space: pre;
  @include adjust-font-size-to(14px, 1, 18px);
  font-family: "Inconsolata", "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, Courier, monospace, sans-serif;
}

body .pygments_autumn .nc, body .pygments_autumn .nn{
  text-decoration: none;
}
